#!/usr/bin/env php
<?php

use ZnCore\App\Libs\ZnCore;
use ZnCore\Container\Libs\Container;
use ZnFramework\Console\Domain\Factories\ConsoleApplicationFactory;

$_SERVER['MICRO_TIME'] = microtime(true);
$_SERVER['REQUEST_ID'] = uniqid();

require __DIR__ . '/../../../../../autoload.php';

/**
 * Инициализация ядра.
 *
 * Инициализируются/конфигурируются компоненты:
 * - DotEnv
 * - контейнер
 *   - EventDispatcher
 *   - ConfigManager
 *   - ContainerConfigurator
 * - загрузчик бандлов
 */
$container = new Container();
$znCore = new ZnCore($container);
$znCore->init();

$applicationFactory = new ConsoleApplicationFactory($container);
$application = $applicationFactory->createApplicationInstance();
$application->run();
